## 実行方法
引数を指定せずに実行するとランダムにセリフを生成します。
ex. ```python index.py```
引数に適当な単語を渡して実行すると、それを主語にセリフを生成します。
ex. ```python index.py 幸せ```


## 実行環境 (必要なもの)
- Python 2.7.13
- requests 2.10.0
- 環境変数 TEXTKEY (Text Suggest APIのAPI Key)
- 環境変数 TYPOKEY (Proofreading APIのAPI Key)



## 動作アルゴリズム
1. 引数の有無を確認する。
1. 引数がある場合はそれを主語とする。
引数がない場合は予め用意しておいたものから主語をランダムに一つ選ぶ。
1. A3RTのText Susggestion APIを利用して、主語からセリフを生成する。
(予め名台詞を学習させておく。)
1. A3RTのProofreading APIを利用して、生成されたセリフが正しい日本語であるかどうかを検証する。
1. 正しい日本語であれば表示し終了する。
正しい日本語でなければ手順3に戻る。


## 実装方法
本アプリの実装はPhraseSpiderとPhraseClientの2つのプログラムを使用した。

### PhraseSpider
PhraseSpiderは映画など名台詞を収集するプログラムである。
[世界傑作格言集](http://kakugen.aikotoba.jp/ "世界傑作格言集")のサイトをクロール・スクレイピングし、名台詞の収集を行う。
収集した名台詞はA3RTの Text Suggestion APIのモデルの生成に使用される。

このプログラムはdevelopersブランチのspiderディレクトリに存在する。
制作にはscrapyパッケージを利用した。

### PhraseClient
PhraseClientは与えられた主語からセリフを生成するプログラムである。
セリフの生成には予め名台詞を学習したText Suggestion APIを利用し、生成されたセリフの検証にはProofreading APIを利用する。

このプログラムはappディレクトリに存在する。
APIの呼び出しにはreqestsモジュールを利用する。


## 発生した問題点
このアプリを制作する上で困難だったのは、自然な日本語のセリフを生成させることである。
今回学習に利用したデータは1500文程度であり、それぞれの口調も異なるためText Suggestion APIだけでは自然な日本語が生成されないことが多かった。
そこでProofreeding APIを利用して生成されたセリフの修正を行うことにした。
当初は指摘された部分以降を修正しようとしたが、文が長くなれば長くなるほど不自然な台詞になることが多くなったので、セリフ全体を新たに生成し直すように変更した。
これにより自然な日本語が生成される確率を上げることができた。


